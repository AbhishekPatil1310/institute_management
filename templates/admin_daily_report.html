<!DOCTYPE html>
<html>
<head>
    <title>Admin Daily Report</title>
</head>
<body>

<div style="margin-top: 15px; margin-bottom: 10px;">
    <a href="/admin/dashboard" style="text-decoration: none;">
        <button type="button" style="padding: 6px 12px; cursor: pointer; font-weight: bold;">
            &larr; Back to Dashboard
        </button>
    </a>
</div>

<h2>Daily Admission & Payment Report</h2>

<nav>
    <a href="/logout">Logout</a>
</nav>

<hr>

<form method="POST">
    <label>Select Date:</label>
    <input type="date" name="report_date" value="{{ selected_date }}">
    <button type="submit">View Report</button>
</form>

<hr>

<h3>Date: {{ selected_date }}</h3>

<h3>New Admissions</h3>

{% if admissions %}
<table border="1" cellpadding="6" style="border-collapse: collapse; width: 100%;">
    <tr style="background-color: #f9f9f9;">
        <th>Student</th>
        <th>Batch</th>
        <th>Total Fee</th>
        <th>Paid</th>
        <th>Pending</th>
        <th>Status</th>
    </tr>
    {% for adm in admissions %}
    <tr>
        <td>{{ adm.student.name }}</td>
        <td>{{ adm.batch.batch_code }}</td>
        <td>₹{{ adm.total_fee }}</td>
        <td>₹{{ adm.paid_amount }}</td>
        <td>₹{{ adm.pending_amount }}</td>
        <td>{{ adm.status }}</td>
    </tr>
    {% endfor %}
</table>
{% else %}
<p>No admissions on this date.</p>
{% endif %}

<hr>

<h3>Payments Received</h3>

{% if payments %}
<table border="1" cellpadding="6" style="border-collapse: collapse; width: 100%;">
    <tr style="background-color: #f9f9f9;">
        <th>Receipt No</th>
        <th>Student</th>
        <th>Batch</th>
        <th>Amount</th>
        <th>Mode</th>
    </tr>
    {% for p in payments %}
    <tr>
        <td>RCP-{{ "%06d"|format(p.id) }}</td>
        <td>{{ p.admission.student.name }}</td>
        <td>{{ p.admission.batch.batch_code }}</td>
        <td>₹{{ p.amount }}</td>
        <td>{{ p.payment_mode }}</td>
    </tr>
    {% endfor %}
</table>
{% else %}
<p>No payments received.</p>
{% endif %}

<hr>

<div style="background-color: #eee; padding: 10px; display: inline-block;">
    <h3 style="margin: 0;">Total Collection: ₹{{ total_collection }}</h3>
</div>

</body>
</html>