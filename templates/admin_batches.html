<!DOCTYPE html>
<html>

<head>
    <title>Admin â€“ Batch Management</title>
</head>

<body>

    <div style="margin-top: 10px; margin-bottom: 20px;">
        <a href="/admin/dashboard" style="text-decoration: none;">
            <button type="button" style="cursor: pointer; padding: 5px 10px;">
                &larr; Back to Dashboard
            </button>
        </a>
    </div>

    <hr>

    <h2>Create New Batch</h2>

    <form method="POST">
        <label>Batch Code</label><br>
        <input name="batch_code" required><br><br>

        <label>Course Name</label><br>
        <input name="course_name" required><br><br>

        <label>Total Fee</label><br>
        <input type="number" name="total_fee" required><br><br>

        <label>Start Date</label><br>
        <input type="date" name="start_date" required><br><br>

        <label>End Date</label><br>
        <input type="date" name="end_date"><br><br>

        <button type="submit">Create Batch</button>
    </form>

    <hr>

    <h2>Existing Batches</h2>

    <table border="1" cellpadding="5" style="width: 100%; border-collapse: collapse;">
        <tr style="background-color: #f2f2f2;">
            <th>Batch Code</th>
            <th>Course</th>
            <th>Fee</th>
            <th>Start</th>
            <th>End</th>
            <th>Status</th>
        </tr>

        {% for batch in batches %}
        <tr>
            <td>{{ batch.batch_code }}</td>
            <td>{{ batch.course_name }}</td>
            <td>{{ batch.total_fee }}</td>
            <td>{{ batch.start_date }}</td>
            <td>{{ batch.end_date }}</td>
            <td>{{ batch.status }}</td>
            <td>
                <form method="POST" action="{{ url_for('admin.delete_batch', batch_id=batch.id) }}"
                    onsubmit="return confirm('This will permanently delete the batch and all related data. Continue?');">

                    {% if csrf_token %}
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    {% endif %}

                    <button type="submit" style="background:red;color:white;">
                        Delete
                    </button>
                </form>
            </td>
        </tr>

        {% endfor %}
    </table>

</body>

</html>